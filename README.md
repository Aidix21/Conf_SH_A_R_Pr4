# Инструмент командной строки для учебного конфигурационного языка (Вариант 25)

Проект представляет собой инструмент для трансляции текста из учебного конфигурационного языка в формат TOML.

## Описание

Инструмент (`main.py`) читает входной текст из стандартного ввода (stdin), выполняет синтаксический анализ, вычисляет константные выражения на этапе трансляции и выводит результат в стандартный вывод (stdout).

## Структура проекта

*   **`main.py`** — Основной исполняемый файл. Содержит логику лексера, парсера и сериализатора в TOML.
*   **`tests.py`** — Скрипт автоматического тестирования. Проверяет корректность работы всех конструкций языка.
*   **`example1.txt`** — Тестовый пример конфигурации базы данных.
*   **`example2.txt`** — Тестовый пример игровых настроек (использование `abs()` и выражений).
*   **`example3.txt`** — Тестовый пример IoT устройства (глубокая вложенность).

## Синтаксис языка

Инструмент поддерживает следующие конструкции согласно заданию:

1.  **Комментарии:** Однострочные, начинаются с `\`.
2.  **Числа:** Восьмеричные, формат `0[oO][0-7]+` (например, `0o12`). При трансляции преобразуются в десятичные.
3.  **Словари:** Структура `[ ИМЯ => значение, ... ]`.
4.  **Имена:** Регулярное выражение `[A-Z]+`.
5.  **Константы:** Объявление `const ИМЯ = значение`.
6.  **Вычисления:** Константные выражения `$(...)`. Поддерживаются:
    *   Сложение: `+`
    *   Функция модуля: `abs()`
    *   Использование ранее объявленных констант.

## Инструкция по запуску

Для работы требуется установленный Python 3.

### 1. Запуск транслятора

Способ запуска зависит от используемой операционной системы и терминала.

**Windows (PowerShell):**
В PowerShell оператор `<` не работает для ввода, используйте конвейер:
```powershell
Get-Content example1.txt | python main.py
```

**Windows (CMD), Linux, macOS:**
Используйте стандартное перенаправление ввода:
```bash
python main.py < example1.txt
```

### 2. Запуск тестов

Скрипт `tests.py` выполняет серию интеграционных тестов. Он запускает `main.py` как отдельный процесс, передает ему тестовые данные и проверяет корректность вывода (stdout) и кодов возврата.

Покрываемые тесты:
*   `test_basic_octal`: Корректность парсинга восьмеричных чисел.
*   `test_nested_dict`: Обработка вложенных словарей.
*   `test_comments`: Игнорирование комментариев.
*   `test_constants_calculation`: Вычисление выражений `$(A + B)`.
*   `test_abs_function`: Работа функции `abs()`.
*   `test_syntax_error`: Проверка реакции на некорректный синтаксис (должна быть ошибка).

Команда для запуска:
```bash
python tests.py
```

## Примеры конфигураций

В проект включены три примера для демонстрации возможностей:

*   **example1.txt**: Демонстрирует простые ключи и восьмеричные числа.
*   **example2.txt**: Демонстрирует математические вычисления и функцию модуля.
*   **example3.txt**: Демонстрирует сложную вложенную структуру.
